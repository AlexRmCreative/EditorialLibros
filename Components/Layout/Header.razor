@using Newtonsoft.Json

<nav class="navbar navbar-dark bg-secondary">
    <div class="navbar-brand d-flex align-items-center">
        <img src="/img/editorial_logo.png" width="47" height="35" class="d-inline-block align-top ms-5" alt="" />
        <h3 class="m-0 ml-2">Terraverso</h3>
    </div>
    <div class="ms-auto me-5">
        @if (_isLoggedIn)
        {
            <h5 class="text-white d-inline">@email</h5>
        }
        else
        {
            <NavLink href="login" class="btn btn-outline-light ms-2">
                <svg class="bi bi-door-open" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1" />
                    <path d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117M11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z" />
                </svg>
                Login
            </NavLink>
        }

        <NavLink href="#" class="btn btn-outline-light ms-2">
            <svg class="bi bi-cart" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
            </svg>
        </NavLink>
    </div>
</nav>

@code
{
    bool _isLoggedIn = false;
    string email = "";

    protected override void OnInitialized()
    {
        base.OnInitialized();

        string jsonContent = File.ReadAllText("loginInfo.json");
        LoginInfo loginInfo = JsonConvert.DeserializeObject<LoginInfo>(jsonContent);
        _isLoggedIn = loginInfo.IsLoggedIn;
        email = loginInfo.Email;
    }
}